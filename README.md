# CS2 åœ°å›¾ Ban Pick å·¥å…·

ä¸€ä¸ªç”¨äº Counter-Strike 2 çš„åœ°å›¾ Ban Pick å·¥å…·ï¼Œæ”¯æŒ BO3 æ¨¡å¼çš„åœ°å›¾ç¦ç”¨å’Œé€‰æ‹©æµç¨‹ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Vue.js 3 + Vite + TailwindCSS + Socket.io-client
- **åç«¯**: Python FastAPI + SQLAlchemy + Socket.io
- **æ•°æ®åº“**: PostgreSQL 15
- **éƒ¨ç½²**: Docker + Docker Compose + Nginx

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰

```bash
# å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up

# ç”Ÿäº§ç¯å¢ƒ
docker-compose up -d
```

### æœ¬åœ°å¼€å‘

#### å‰ç«¯å¼€å‘

```bash
cd frontend
npm install
npm run dev
```

#### åç«¯å¼€å‘

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

#### æ•°æ®åº“åˆå§‹åŒ–

```bash
cd backend
alembic upgrade head
```

## é¡¹ç›®ç»“æ„

```
CS2-Map-Ban-Pick-Tool/
â”œâ”€â”€ plans/                    # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ 01-é¡¹ç›®æ•´ä½“æ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ 02-æ•°æ®åº“æ¨¡å‹è®¾è®¡.md
â”‚   â”œâ”€â”€ 03-åç«¯APIæ¥å£è§„èŒƒ.md
â”‚   â”œâ”€â”€ 04-å‰ç«¯é¡µé¢ç»“æ„å’Œç»„ä»¶æ¶æ„.md
â”‚   â”œâ”€â”€ 05-é¡¹ç›®ç›®å½•ç»“æ„.md
â”‚   â”œâ”€â”€ 06-Dockeré…ç½®æ–‡ä»¶.md
â”‚   â””â”€â”€ 07-å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶.md
â”œâ”€â”€ frontend/                  # Vue.js å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BPMapPolygon/  # ä¸ƒè¾¹å½¢åœ°å›¾æ± ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBox/       # èŠå¤©æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ MapCard/       # åœ°å›¾å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressBar/   # è¿›åº¦æ¡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ResultGrid/    # ç»“æœå±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TeamDisplay/   # é˜Ÿä¼å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Timer/         # è®¡æ—¶å™¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ common/        # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ JoinRoom.vue       # åŠ å…¥æˆ¿é—´é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectTeam.vue     # é€‰æ‹©é˜Ÿä¼é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ InputName.vue      # è¾“å…¥æ˜µç§°é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ WaitingRoom.vue    # ç­‰å¾…å‡†å¤‡é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ BPProcess.vue      # BP æµç¨‹é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ BPResult.vue       # BP ç»“æœé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminLogin.vue     # ç®¡ç†å‘˜ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ AdminDashboard.vue # ç®¡ç†å‘˜åå°
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ room.ts      # æˆ¿é—´çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts      # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ bp.ts        # BP æµç¨‹çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ chat.ts      # èŠå¤©çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ services/      # API å’Œ WebSocket æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts       # REST API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ socket.ts    # WebSocket å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts     # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts   # æœ¬åœ°å­˜å‚¨å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts     # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.vue        # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ public/              # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ postcss.config.js
â”œâ”€â”€ backend/                   # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py        # FastAPI åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ api/           # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py    # ç®¡ç†å‘˜ç›¸å…³ API
â”‚   â”‚   â”‚   â”œâ”€â”€ rooms.py    # æˆ¿é—´ç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py    # ç”¨æˆ·ç®¡ç† API
â”‚   â”‚   â”‚   â”œâ”€â”€ bp.py       # BP æµç¨‹ API
â”‚   â”‚   â”‚   â””â”€â”€ records.py  # è®°å½•æŸ¥è¯¢ API
â”‚   â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py   # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”‚   â””â”€â”€ deps.py     # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py    # ç®¡ç†å‘˜æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ room.py     # æˆ¿é—´æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py     # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ mappool.py  # åœ°å›¾æ± æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ bp_record.py # BP è®°å½•æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/       # Pydantic æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”‚   â”œâ”€â”€ room.py
â”‚   â”‚   â”‚   â”œâ”€â”€ bp.py
â”‚   â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ websocket/     # WebSocket å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py  # WebSocket è¿æ¥ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers.py # WebSocket äº‹ä»¶å¤„ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ events.py   # WebSocket äº‹ä»¶å®šä¹‰
â”‚   â”‚   â””â”€â”€ db/           # æ•°æ®åº“ä¼šè¯
â”‚   â”‚       â”œâ”€â”€ base.py     # æ•°æ®åº“åŸºç±»
â”‚   â”‚       â””â”€â”€ session.py  # ä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ test_api/
â”‚   â”‚   â”œâ”€â”€ test_services/
â”‚   â”‚   â””â”€â”€ test_websocket/
â”‚   â”œâ”€â”€ scripts/             # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ requirements-dev.txt
â”‚   â”œâ”€â”€ pyproject.toml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.dev
â”‚   â””â”€â”€ alembic.ini
â”œâ”€â”€ nginx/                     # Nginx é…ç½®
â”‚   â””â”€â”€ nginx.conf
â”œâ”€â”€ docker-compose.yml          # Docker ç¼–æ’é…ç½®ï¼ˆç”Ÿäº§ï¼‰
â”œâ”€â”€ docker-compose.dev.yml      # Docker ç¼–æ’é…ç½®ï¼ˆå¼€å‘ï¼‰
â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .gitignore
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md
```

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… æˆ¿é—´åˆ›å»ºå’Œç®¡ç†
- âœ… åœ°å›¾æ± é…ç½®ï¼ˆè‡ªå®šä¹‰åœ°å›¾æ± ï¼‰
- âœ… ç”¨æˆ·åŠ å…¥æˆ¿é—´å’Œé€‰æ‹©é˜Ÿä¼
- âœ… å®æ—¶èŠå¤©ï¼ˆé˜Ÿå†…å¯è§ï¼‰
- âœ… BO3 BP æµç¨‹
  - Roll ç‚¹å†³å®šå…ˆåæ‰‹
  - ç¬¬ä¸€è½® Banï¼ˆæ¯é˜Ÿå„1å¼ ï¼‰
  - ç¬¬äºŒè½® Banï¼ˆæ¯é˜Ÿå„1å¼ ï¼‰
  - Pickï¼ˆæ¯é˜Ÿå„1å¼ ï¼‰
  - å†³èƒœå›¾è‡ªåŠ¨é€‰æ‹©
- âœ… è®¡æ—¶å™¨ï¼ˆæ¯æ“ä½œ15ç§’ï¼‰
- âœ… BP ç»“æœå±•ç¤º
- âœ… ç®¡ç†å‘˜åå°
  - æˆ¿é—´ç®¡ç†
  - åœ°å›¾æ± ç®¡ç†
  - BP è®°å½•æŸ¥çœ‹

### UI ç‰¹æ€§
- ğŸ¨ æ­£ä¸ƒè¾¹å½¢åœ°å›¾æ± å±•ç¤º
- ğŸ“Š å®æ—¶è¿›åº¦æ¡
- â±ï¸ æ“ä½œè®¡æ—¶å™¨
- ğŸ’¬ é˜Ÿå†…èŠå¤©ç³»ç»Ÿ
- ğŸ“± BP ç»“æœå¯è§†åŒ–å±•ç¤º

## API æ–‡æ¡£

- **å‰ç«¯**: `http://localhost:3000`
- **åç«¯**: `http://localhost:8000/api`
- **Swagger**: `http://localhost:8000/docs`
- **WebSocket**: `ws://localhost:8000/ws`

## å¼€å‘è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¡†æ¶ âœ…
- [x] é¡¹ç›®ç›®å½•ç»“æ„
- [x] å‰ç«¯é¡¹ç›®æ–‡ä»¶
- [x] åç«¯é¡¹ç›®æ–‡ä»¶
- [x] Docker é…ç½®æ–‡ä»¶
- [x] Nginx é…ç½®æ–‡ä»¶
- [x] å‰ç«¯æºä»£ç æ–‡ä»¶
- [x] åç«¯æºä»£ç æ–‡ä»¶

### ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®åº“é›†æˆ
- [ ] å®ç°æ•°æ®åº“æ¨¡å‹
- [ ] å®ç°æ•°æ®åº“è¿ç§»
- [ ] åˆ›å»ºåˆå§‹åŒ–è„šæœ¬

### ç¬¬ä¸‰é˜¶æ®µï¼šAPI å¼€å‘
- [ ] å®ç°ç®¡ç†å‘˜ç™»å½• API
- [ ] å®ç°æˆ¿é—´ç®¡ç† API
- [ ] å®ç°ç”¨æˆ·ç®¡ç† API
- [ ] å®ç° BP æµç¨‹ API

### ç¬¬å››é˜¶æ®µï¼šWebSocket å¼€å‘
- [ ] å®ç° WebSocket è¿æ¥ç®¡ç†
- [ ] å®ç° BP æµç¨‹å®æ—¶é€šä¿¡
- [ ] å®ç°èŠå¤©åŠŸèƒ½

### ç¬¬äº”é˜¶æ®µï¼šå‰ç«¯å¼€å‘
- [ ] å®ç°åŠ å…¥æˆ¿é—´é¡µé¢
- [ ] å®ç°é€‰æ‹©é˜Ÿä¼é¡µé¢
- [ ] å®ç°ç­‰å¾…å‡†å¤‡é¡µé¢
- [ ] å®ç° BP æµç¨‹é¡µé¢
- [ ] å®ç° BP ç»“æœé¡µé¢
- [ ] å®ç°ç®¡ç†å‘˜åå°

### ç¬¬å…­é˜¶æ®µï¼šæµ‹è¯•å’Œéƒ¨ç½²
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] Docker éƒ¨ç½²
- [ ] ç”Ÿäº§ç¯å¢ƒé…ç½®

## ç¯å¢ƒå˜é‡

### å‰ç«¯ç¯å¢ƒå˜é‡ (`.env`)
```env
VITE_API_BASE_URL=http://localhost:8000/api
VITE_WS_BASE_URL=ws://localhost:8000/ws
```

### åç«¯ç¯å¢ƒå˜é‡ (`.env`)
```env
DATABASE_URL=postgresql://user:password@localhost:5432/cs2_bp
SECRET_KEY=your-secret-key-here
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
```

## è®¸å¯è¯

MIT

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
